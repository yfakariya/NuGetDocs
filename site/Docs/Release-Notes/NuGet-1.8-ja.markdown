<!-- 5 26 11:01:47 2012 7e593278e0d81b00c0f9b73e8b7aa112d5c83137 -->
# NuGet 1.8 リリースノート

## 既知のインストールに関する問題

Visual Studio 2010 SP1 を使用している場合には、古いバージョンがインストールされていると、NuGet のアップグレードするときにインストールエラーが発生するかもしれません。

回避策は、単に NuGet をアンインストールしてから VS Extension Gallery 経由でインストールすることです。詳細情報については、<a href="http://support.microsoft.com/kb/2581019">http://support.microsoft.com/kb/2581019</a> を参照してください。

注：Visual Studio が拡張機能のアンインストールを許可しない（アンインストールボタンが無効になっている）場合には、「管理者として実行」を使用して Visual Studio を再起動する必要があるかもしれません。

## NuGet 1.8 の Windows XP との非互換性（HotFix を準備中です）

NuGet 1.8 のリリース直後に、1.8 での暗号の変更が、 Windows XP で使用しているユーザーで問題となることがわかりました。Windows XP マシンには NuGet 1.8 をインストールしないでください。NuGet 1.8 をインストールしてしまった場合には、1.8 をアンインストールして、 [このダウンロードリンク](http://nuget.codeplex.com/downloads/get/382255) から NuGet 1.7 を再インストールしてください。

このリグレッションを解消するために、NuGet 1.8.1 のリリースを準備中です。この問題に対する [CodePlex のディスカッションのスレッド](http://nuget.codeplex.com/discussions/356928) を参照してください。また、このリグレッションの修正用の [ワークアイテム](http://nuget.codeplex.com/workitem/2240) になっています。

## 新機能

### ローカライズリソース用のサテライトパッケージ

NuGet 1.8 は、.NET Framework のサテライトアセンブリ機能と同じように、ローカライズリソース用に別のパッケージを作成する機能をサポートするようになりました。サテライトパッケージは他の NuGet パッケージと同じように作成されますが、いくつかの規約が追加されています。

* サテライトパッケージの ID とファイル名には、標準の [.NET Framework によって使用されるカルチャ文字列](http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx) に一致するサフィックスを含めるべきです。
* `.nuspec` ファイルでは、サテライトパッケージは ID で使用したのと同じカルチャ文字列を持つ言語要素を定義すべきです。
* サテライトパッケージは、 `.nuspec` ファイルにコアパッケージへの依存関係を定義すべきです。コアパッケージは、単にパッケージ ID から言語サフィックスを引いた ID を持つパッケージのことです。コアパッケージはインストールの成功時にはリポジトリで使用可能になっている必要があります。

ローカライズリソース付きでパッケージをインストールするために、開発者はリポジトリからローカライズされたパッケージを明示的に選択します。現在、NuGet ギャラリーにサテライトパッケージを特別扱いしません。

![ローカライズされたパッケージでのパッケージ マネージャー ダイアログ](images/dlg-w-loc-packs.png)

サテライトパッケージにはコアパッケージへの依存関係の一覧があるので、サテライトパッケージとコアパッケージの両方が NuGet の packages フォルダーにプルされ、インストールされます。

![ローカライズされたパッケージつきの packages フォルダー](images/fldr-loc-packs.png)

さらに、サテライトパッケージのインストール中、NuGet はカルチャ文字列の命名規約を認識し、コアパッケージの正しいサブフォルダーにローカライズ リソース アセンブリをコピーします。これによって、.NET Framework がサテライト アセンブリを検索できます。

![コピーされたリソースフォルダーのあるコアパッケージフォルダー](images/fldr-copied-loc.png)

サテライトパッケージについて述べておくべき既存のバグとして、NuGet は Web サイトプロジェクトの `bin` フォルダーにローカライズされたリソースをコピーしません。この問題は NuGet の次のリリースで修正される予定です。

サテライトパッケージの作成方法と使用方法を説明する完全なサンプルについては、[https://github.com/NuGet/SatellitePackageSample](https://github.com/NuGet/SatellitePackageSample) を参照してください。

### パッケージの復元の合意

NuGet 1.8 では、ユーザーのプライバシーを保護するために、パッケージの復元で重要な制約をサポートする下地を整えました。この制約によって、開発者がパッケージの復元を使用するプロジェクトまたはソリューションをビルドするときに、パッケージの復元が構成されたパッケージソースからオンラインでパッケージをダウンロードすることについての明示的な合意が必要になります。

合意を示す方法は 2 つあります。1 番目の方法は、次に示す **パッケージ マネージャーの設定**（**Package Manager Configuration**）ダイアログを使用することです。この方法は主に開発者のマシンでの使用を意図したものです。

![パッケージ マネージャーの設定ダイアログ](images/pr-consent-configdlg.png)

2 番目の方法は、環境変数 "EnableNuGetPackageRestore" を "true" に設定する方法です。この方法は CI やビルド用のサーバーといった、無人のマシンでの使用を意図したものです。

さて、前述のように、NuGet 1.8 ではこの機能の下地が整ったにすぎません。つまり、実際には、この機能を有効にするためのロジックはすべて追加し終わりましたが、このバージョンで合意が強制されることはないということです。ただし、NuGet の次のリリースでは有効になるので、みなさんが環境を適切に構成して、合意の制約が強制され始めた時に悪影響がないように、可能な限り迅速にみなさんにお知らせしようと思っています。

さらなる詳細については、この機能に関する[チームのブログ投稿](http://blog.nuget.org/20120518/package-restore-and-consent.html)を参照してください。

### NuGet.exe のパフォーマンスの改善

パッケージの並列ダウンロードと並列インストールを行うように `install` コマンドを変更することで（さらに、拡張パッケージの復元を使用することで）、NuGet 1.8 では `nuget.exe` のパフォーマンスが劇的に改善されました。高レベルのテストでは、NuGet 1.8 ではプロジェクトへの 6 つのパッケージのインストールのパフォーマンスが、およそ 35% 改善されていることが示されています。パッケージの数を 25 まで増やすと、パフォーマンスの向上は 60% になります。

## バグの修正

NuGet 1.8 には、パッケージマネージャー コンソールの強調表示と、パッケージの復元のワークフローに関するごく少数のバグの修正が含まれます。特に、これらの修正はパッケージの復元の合意と Windows 8 Express への統合に関係しています。
NuGet 1.8 で修正されたワークアイテムの完全な一覧については、 [このリリースについての NuGet の Issue Tracler](http://nuget.codeplex.com/workitem/list/advanced?keyword=&status=Closed&type=All&priority=All&release=NuGet%201.8&assignedTo=All&component=All&sortField=Votes&sortDirection=Descending&page=0) を参照してください。
